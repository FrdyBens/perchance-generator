<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Perchance Meta Tags -->
    <!-- Favicon Plugin from Perchance -->
    [favicon("https://user.uploads.dev/file/bb9eaa69cf52c1de1ffcb00e91ae8082.png")]

    <link rel="apple-touch-icon" href="https://user.uploads.dev/file/78681e036e183f78ec57eafa54413905.png" />
    <link rel="icon" type="image/png" href="https://user.uploads.dev/file/f37a7d70eb6cf3113695dd536f4ac40d.png" sizes="180x180" />
    <link rel="icon" type="image/png" href="https://user.uploads.dev/file/affe2a573240f1beb78b45bde5325480.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="https://user.uploads.dev/file/cb7d0a2b3b882b66cffcb702502ba624.png" sizes="16x16" />
    <link rel="manifest" href="https://files.catbox.moe/ve3kjz.webmanifest" />

    <!-- Adding Font Awesome for icons - Using the one from my-try.html as it's newer -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <style>
      /* CSS Reset and Global Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        background-color: #18181b; /* Main dark background */
        color: #f4f4f5; /* Primary text color (off-white) */
        height: 100vh;
        overflow: hidden; /* Prevent body scrolling */
      }

      /* --- Animations --- */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.98);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      /* --- Scrollbar --- */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #27272a;
      }
      ::-webkit-scrollbar-thumb {
        background: #52525b;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #71717a;
      }

      /* Main Layout Container */
      .app-container {
        display: grid;
        grid-template-columns: 320px 1fr; /* Removed third column for right sidebar */
        height: 100vh;
        animation: fadeIn 0.5s ease-out;
      }

      /* --- Left Sidebar --- */
      .left-sidebar {
        background-color: #27272a; /* Sidebar background */
        padding: 20px;
        overflow-y: auto;
        border-right: 1px solid #3f3f46;
      }

      .control-section {
        margin-bottom: 12px;
      }

      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 0;
        cursor: pointer;
        user-select: none;
      }

      .section-header h3 {
        font-size: 16px;
        font-weight: 600;
      }

      .section-header .chevron {
        color: #a1a1aa;
        transition: transform 0.3s ease;
      }

      .section-header .chevron.rotated {
        transform: rotate(90deg);
      }

      .section-content {
        max-height: 1000px;
        overflow: hidden;
        transition: max-height 0.4s ease-in-out;
      }

      .section-content.hidden {
        max-height: 0;
      }

      /* --- Main Content Area --- */
      .main-content {
        display: flex;
        flex-direction: column;
        overflow: hidden;
        background-color: #1c1c1f;
      }

      .top-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 24px;
        flex-shrink: 0;
        border-bottom: 1px solid #3f3f46;
        background-color: #18181b;
      }

      .top-bar .logo {
        font-size: 20px;
        font-weight: 700;
        background: linear-gradient(45deg, #8b5cf6, #3b82f6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .top-bar .main-tabs {
        display: flex;
        gap: 8px;
        background-color: #27272a;
        padding: 6px;
        border-radius: 10px;
      }

      .top-bar .tab-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 8px;
        background-color: transparent;
        color: #a1a1aa;
        font-weight: 500;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .top-bar .tab-btn.active {
        background-color: #3f3f46;
        color: #f4f4f5;
      }

      /* Tab Content Styling */
      .tab-content-area {
        flex-grow: 1;
        overflow: hidden;
        position: relative;
      }
      .tab-pane {
        display: none;
        flex-direction: column;
        height: 100%;
        width: 100%;
        position: absolute;
        overflow: hidden; /* Important for positioning prompt bar */
      }
      .tab-pane.active {
        display: flex;
      }

      #generate-tab-content.active {
          align-items: center;
          justify-content: center;
      }

      .image-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
        width: 100%;
        max-width: 700px;
        max-height: 700px;
        aspect-ratio: 1 / 1;
      }

      .image-grid .img-wrapper {
        width: 100%;
        height: 100%;
        position: relative;
      }

      .image-grid img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 12px;
        background-color: #27272a;
      }

      /* New Prompt Container Styling */
      .prompt-area-container {
        position: absolute;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        width: 90%;
        max-width: 720px;
        padding: 12px;
        background-color: rgba(40, 40, 42, 0.7);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        border: 1px solid #3f3f46;
      }

      .prompt-area-container textarea {
        width: 100%;
        background: transparent;
        border: none;
        color: #f4f4f5;
        resize: none;
        font-size: 15px;
        padding: 8px;
        min-height: 60px;
        line-height: 1.5;
        outline: none;
      }

      .prompt-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 8px 0;
        margin-top: 8px;
        border-top: 1px solid #3f3f46;
      }

      .prompt-group {
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .control-btn {
          background-color: #3f3f46;
          border: 1px solid #52525B;
          color: #A1A1AA;
          font-size: 14px;
          font-weight: 500;
          padding: 8px 12px;
          border-radius: 8px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.2s;
      }
      .control-btn:hover {
          background-color: #52525B;
          color: #f4f4f5;
      }

      .guidance-container {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .guidance-container input[type="range"] {
          width: 140px;
          -webkit-appearance: none;
          appearance: none;
          background: #3f3f46;
          height: 4px;
          border-radius: 2px;
          outline: none;
          cursor: pointer;
      }
      .guidance-container input[type="range"]::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          width: 14px;
          height: 14px;
          background: #3b82f6;
          border-radius: 50%;
          border: 2px solid #f4f4f5;
      }

      #seed-input {
        background-color: #27272A;
        border: 1px solid #52525B;
        color: #a1a1aa;
        width: 100px;
        height: 36px;
        border-radius: 8px;
        text-align: center;
        font-size: 14px;
        outline: none;
      }

      .btn-regenerate {
          background-color: #3b82f6;
          border: none;
          color: white;
          font-size: 15px;
          font-weight: 600;
          padding: 8px 16px;
          border-radius: 8px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 8px;
          transition: background-color 0.2s;
      }

      .btn-regenerate i {
          transition: transform 0.5s;
      }

      .btn-regenerate:hover i {
          transform: rotate(180deg);
      }
      .btn-regenerate:hover {
          background-color: #2563eb;
      }


      /* --- Gallery Tab Content --- */
      #gallery-tab-content {
          overflow-y: auto;
      }
      #gallery-tab-content .gallery-container {
         padding: 24px;
      }

      .gallery-grid {
        width: 100%;
      }


      /* --- Right Sidebar (History) --- */
      .right-sidebar {
        background-color: #27272a;
        padding: 16px;
        overflow-y: auto;
        border-left: 1px solid #3f3f46;
      }

      .history-header {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 16px;
      }
      .history-header .icon-btn {
        background: none;
        border: none;
        color: #a1a1aa;
        cursor: pointer;
      }

      .history-feed {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .history-item {
        display: flex;
        flex-direction: column;
        gap: 8px;
        cursor: pointer;
      }

      .history-item img {
        width: 100%;
        border-radius: 12px;
      }

      .history-item span {
        font-size: 13px;
        color: #a1a1aa;
        padding-left: 4px;
      }

      /* Styles for thumbnail items in sidebars */
      .thumbnail-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
        padding-top: 12px;
      }

      .thumbnail-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        text-align: center;
        transition: transform 0.2s ease;
      }

      .thumbnail-item:hover {
        transform: translateY(-2px);
      }

      .thumbnail-item .image-container {
        width: 100%;
        aspect-ratio: 1 / 1;
        border-radius: 12px;
        border: 2px solid transparent;
        transition: border-color 0.2s;
        overflow: hidden;
        background-color: #3f3f46;
      }

      .thumbnail-item.selected .image-container {
        border-color: #60a5fa;
      }

      .thumbnail-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .thumbnail-item span {
        font-size: 12px;
        color: #a1a1aa;
      }

    </style>
  </head>
  <body>
    <div class="app-container">
      <!-- LEFT SIDEBAR -->
      <aside class="left-sidebar">
  <!-- Styles Section (Top Level from v0004) -->
  <div class="control-section">
    <div class="section-header">
      <h3>Styles</h3>
      <i class="fas fa-chevron-right chevron rotated"></i>
    </div>
    <div class="section-content">
      <div class="thumbnail-grid">
        <div class="thumbnail-item selected" data-prompt="">
          <div class="image-container"><img src="[links.images.style_none]" alt="No Style" /></div>
          <span>No Style</span>
        </div>
        <div class="thumbnail-item" data-prompt="cinematic dark urban style, dramatic noir lighting, neon accent colors (purple/cyan/crimson), moody atmospheric, high contrast shadows, cyberpunk aesthetic, villain protagonist mood, professional photography quality, 8k detailed(negativePrompt:::bright cheerful, pastel colors, cute cartoon, childish, rainbow colors, white background, bright daylight, low quality, blurred, watermark, text, amateur photography, oversaturated pink yellow, fairy tale, candy colors, grainy, jpeg artifacts)">
          <div class="image-container"><img src="[links.images.style_urvillain]" alt="URVILLAIN" /></div>
          <span id="urvillainStyle"><i class="fas fa-mask"></i> URVILLAIN</span>
        </div>
        <div class="thumbnail-item" data-prompt="**Base Style**: Ultra-realistic photo capture as if shot with a full-frame DSLR and a 50 mm f/1.8 lens—precise exposure (f/1.8, 1/125 s, ISO 100), accurate white balance (daylight 5500 K), natural ambient and rim lighting, true-to-life skin and material textures (no painterly strokes), realistic depth of field with smooth bokeh, slight film grain or sensor noise, authentic lens artifacts (soft vignetting, minor chromatic aberration), minimal post-processing (gentle color grading in neutral profile), perfectly framed composition.\n• Mention specific camera & lens specs for consistency\n• Use technical terms (shutter speed, aperture, ISO, color temp)\n• Avoid painterly or hyper-detail language—think “camera” not “brush”\n• Keep it grounded in real-world photography techniques.">
          <div class="image-container"><img src="[links.images.style_realistic]" alt="Realistic" /></div>
          <span>Realistic</span>
        </div>
        <div class="thumbnail-item" data-prompt="**Base Style**: cinematic movie still, film still, photorealistic, hyperrealistic, 8K, UHD, masterpiece, professional photography, high dynamic range (HDR), high detail, sharp focus, crystal clear details, shot on cinema camera, anamorphic, shallow depth of field, bokeh, cinematic lighting, volumetric light, god rays, dramatic lighting, dramatic contrast, strong shadows, rim light, filmic, film grain, intricate details, atmospheric, moody, rich tones. (negativePrompt:::painting, drawing, illustration, sketch, cartoon, anime, manga, 3D, render, CGI, VFX, video game, art, digital art, poster, dark image, dim lighting, blurry, low quality, jpeg artifacts, ugly, deformed, disfigured, bad anatomy, extra limbs, missing limbs, fused fingers, too many fingers, watermark, text, signature, logo, camera)">
          <div class="image-container"><img src="[links.images.style_cinematic]" alt="Cinematic" /></div>
          <span>Cinematic</span>
        </div>
        <div class="thumbnail-item" data-prompt="**Base Style**: anime-style character, sharp cel shading, clean line art, vibrant colors, detailed eyes, soft gradients in background, high-contrast lighting, studio anime finish, realistic surface detail, proportionally anatomy, crisp digital rendering, style inspired by modern OVA anime or serialized anime productions — avoids any too wide eyes. (negativePrompt:::low quality, worst quality, low resolution, poorly drawn, deformed, overly realistic and 3D)">
          <div class="image-container"><img src="[links.images.style_anime]" alt="Anime" /></div>
          <span>Anime</span>
        </div>
        <div class="thumbnail-item" data-prompt="abstract vibrant colors, geometric shapes, dynamic composition, surreal elements, imaginative forms(negativePrompt:::photorealistic, realism, human figures, literal representation, dull colors)">
          <div class="image-container"><img src="[links.images.style_abstract]" alt="Abstract" /></div>
          <span>Abstract</span>
        </div>
        <div class="thumbnail-item" data-prompt="digital illustration, detailed line work, painterly textures, concept art style, fantasy elements, character focus(negativePrompt:::photograph, 3D render, realism, simple sketch, abstract)">
          <div class="image-container"><img src="[links.images.style_illustration]" alt="Illustration" /></div>
          <span>Illustration</span>
        </div>
        <div class="thumbnail-item" data-prompt="pixel art, 16-bit, retro gaming aesthetic, limited palette, blocky details, sprite-like(negativePrompt:::high resolution, smooth gradients, photorealism, vector art, 3D)">
          <div class="image-container"><img src="[links.images.style_pixel_art]" alt="Pixel Art" /></div>
          <span>Pixel Art</span>
        </div>
        <div class="thumbnail-item" data-prompt="steampunk aesthetic, gears, cogs, Victorian era, brass and copper, retrofuturistic technology, intricate mechanical details(negativePrompt:::modern, sleek, minimalist, futuristic sci-fi, plastic)">
          <div class="image-container"><img src="[links.images.style_steampunk]" alt="Steampunk" /></div>
          <span>Steampunk</span>
        </div>
        <div class="thumbnail-item" data-prompt="watercolor painting, soft washes, blended colors, artistic texture, light and airy feel, paper texture visible(negativePrompt:::oil painting, acrylic, sharp lines, digital art, photorealism)">
          <div class="image-container"><img src="[links.images.style_watercolor]" alt="Watercolor" /></div>
          <span>Watercolor</span>
        </div>
        <div class="thumbnail-item" data-prompt="vintage photograph, sepia tones, film grain, old-fashioned style, classic car, 1950s Americana, retro aesthetic(negativePrompt:::modern, vibrant colors, digital clarity, futuristic elements)">
          <div class="image-container"><img src="[links.images.style_vintage]" alt="Vintage" /></div>
          <span>Vintage</span>
        </div>
        <div class="thumbnail-item" data-prompt="pencil sketch, hand-drawn, cross-hatching, rough lines, artistic, monochrome, graphite on paper texture(negativePrompt:::color, painting, digital rendering, clean lines, photorealism)">
          <div class="image-container"><img src="[links.images.style_sketch]" alt="Sketch" /></div>
          <span>Sketch</span>
        </div>
        <div class="thumbnail-item" data-prompt="comic book art, bold outlines, halftone dots, dynamic action poses, graphic novel style, vibrant flat colors(negativePrompt:::photorealism, painterly, subtle shading, sketch, 3D render)">
          <div class="image-container"><img src="[links.images.style_comic_book]" alt="Comic Book" /></div>
          <span>Comic Book</span>
        </div>
        <div class="thumbnail-item" data-prompt="epic fantasy art, detailed characters, mythical creatures, magical landscapes, dramatic lighting, high fantasy style(negativePrompt:::sci-fi, modern, realism, mundane, abstract)">
          <div class="image-container"><img src="[links.images.style_fantasy_art]" alt="Fantasy Art" /></div>
          <span>Fantasy Art</span>
        </div>
        <div class="thumbnail-item" data-prompt="neon punk aesthetic, vibrant neon lights, cyberpunk elements, futuristic cityscapes, edgy characters, glowing accents(negativePrompt:::pastel colors, natural lighting, historical, steampunk, muted tones)">
          <div class="image-container"><img src="[links.images.style_neon_punk]" alt="Neon Punk" /></div>
          <span>Neon Punk</span>
        </div>
        <div class="thumbnail-item" data-prompt="3D model render, CGI, digital sculpting, smooth surfaces, realistic lighting and shadows, vfx quality(negativePrompt:::2D, hand-drawn, sketch, painting, pixel art)">
          <div class="image-container"><img src="[links.images.style_3d_model]" alt="3D Model" /></div>
          <span>3D Model</span>
        </div>
        <div class="thumbnail-item" data-prompt="low poly art, geometric shapes, faceted surfaces, minimalist aesthetic, stylized design, vibrant colors(negativePrompt:::high detail, photorealism, smooth curves, complex textures)">
          <div class="image-container"><img src="[links.images.style_low_poly]" alt="Low Poly" /></div>
          <span>Low Poly</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Character (New Parent) -->
  <div class="control-section">
    <div class="section-header"><h3>Character</h3><i class="fas fa-chevron-right chevron"></i></div>
    <div class="section-content hidden">
      <!-- Species (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h3>Species</h3><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden">
          <div class="thumbnail-grid">
            <div class="thumbnail-item" data-prompt="human character, person"><div class="image-container"><img src="[links.images.species_human]" alt="Human"></div><span>Human</span></div>
            <div class="thumbnail-item" data-prompt="elf character, fantasy elf, pointed ears, elegant features"><div class="image-container"><img src="[links.images.species_elf]" alt="Elf"></div><span>Elf</span></div>
            <div class="thumbnail-item" data-prompt="dwarf character, stout, bearded, fantasy dwarf"><div class="image-container"><img src="[links.images.species_dwarf]" alt="Dwarf"></div><span>Dwarf</span></div>
            <div class="thumbnail-item" data-prompt="orc character, green skin, tusks, muscular, fantasy orc"><div class="image-container"><img src="[links.images.species_orc]" alt="Orc"></div><span>Orc</span></div>
            <div class="thumbnail-item" data-prompt="cyborg character, half-human half-machine, robotic parts, futuristic"><div class="image-container"><img src="[links.images.species_cyborg]" alt="Cyborg"></div><span>Cyborg</span></div>
            <div class="thumbnail-item" data-prompt="angelic being, wings, halo, celestial, divine presence"><div class="image-container"><img src="[links.images.species_angel]" alt="Angel"></div><span>Angel</span></div>
            <div class="thumbnail-item" data-prompt="demon, demonic creature, horns, glowing eyes, dark fantasy, underworld setting(negativePrompt:::angelic, holy, cute, human, peaceful)"><div class="image-container"><img src="[links.images.species_demon]" alt="Demon"></div><span>Demon</span></div>
            <div class="thumbnail-item" data-prompt="robot, android, futuristic, mecha, circuits, metallic body, sci-fi(negativePrompt:::organic, human, fantasy, magical, flesh)"><div class="image-container"><img src="[links.images.species_robot]" alt="Robot"></div><span>Robot</span></div>
            <div class="thumbnail-item" data-prompt="zombie, undead, decaying flesh, post-apocalyptic, horror, shambling gait(negativePrompt:::living, healthy, clean, cute, angelic)"><div class="image-container"><img src="[links.images.species_zombie]" alt="Zombie"></div><span>Zombie</span></div>
            <div class="thumbnail-item" data-prompt="vampire, fangs, gothic, nocturnal, elegant, bloodthirsty, pale skin(negativePrompt:::werewolf, angel, human, sunlit, healthy)"><div class="image-container"><img src="[links.images.species_vampire]" alt="Vampire"></div><span>Vampire</span></div>
            <div class="thumbnail-item" data-prompt="alien creature, extraterrestrial, otherworldly, sci-fi, UFO, strange anatomy(negativePrompt:::human, earthling, mundane, common animal)"><div class="image-container"><img src="[links.images.species_alien]" alt="Alien"></div><span>Alien</span></div>
            <div class="thumbnail-item" data-prompt="dragon, scales, wings, fire-breathing, mythical beast, fantasy creature(negativePrompt:::human, mammal, bird (unless it's a dragon-bird hybrid), fish, insect)"><div class="image-container"><img src="[links.images.species_dragon]" alt="Dragon"></div><span>Dragon</span></div>
          </div>
        </div>
      </div>
      <!-- Gender (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h3>Gender</h3><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 12px;">
          <select id="selectGender" class="control-btn" style="width: 100%; height: auto; -webkit-appearance: menulist; appearance: menulist; padding: 8px;">
            <option value="">Default</option>
            <option value="A male character with masculine traits">Male</option>
            <option value="A female character with feminine traits">Female</option>
          </select>
        </div>
      </div>
      <!-- Ethnicity (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h3>Ethnicity</h3><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;"><select id="select_ethnicity" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvEthnicity]</select></div>
      </div>
      <!-- Maturity (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h3>Maturity</h3><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;">
          <select id="select_maturity" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
            <option value="">Default</option>
            <option value="(Subject Depiction: toddler, young child around 3 to 5 years old, chubby cheeks, small stature, playful expression)">Toddler</option>
            <option value="(Subject Depiction: kid, child around 6 to 9 years old, round face, small hands, energetic posture)">Kid</option>
            <option value="(Subject Depiction: pre-teen, around 10 to 12 years old, slightly elongated face, lean limbs, curious gaze)">Pre-Teen</option>
            <option value="(Subject Depiction: teenager, around 13 to 17 years old, youthful facial structure, growing taller, expressive and emotional features)">Teen</option>
            <option value="(Subject Depiction: young adult, around 18 to 25 years old, mature facial features, toned body, confident stance)">Young Adult</option>
            <option value="(Subject Depiction: adult, around 26 to 39 years old, defined features, stable posture, full-grown physique)">Adult</option>
            <option value="(Subject Depiction: middle-aged adult, around 40 to 59 years old, visible laugh lines, firm build with subtle signs of aging)">Middle-Aged</option>
            <option value="(Subject Depiction: senior adult, around 60 to 75 years old, wrinkles, softer skin, slower posture, gray or thinning hair)">Senior</option>
            <option value="(Subject Depiction: elder adult, over 75 years old, deep facial lines, hunched posture, fragile appearance, age-worn eyes)">Elder</option>
            <option value="(Subject Depiction: ageless being, immortal appearance, timeless skin, ethereal expression, body defies aging or decay)">Ageless Being</option>
          </select>
        </div>
      </div>
      <!-- Persona (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h3>Persona</h3><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;"><select id="select_persona" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvPersona]</select></div>
      </div>
      <!-- Professions (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h3>Professions</h3><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;"><select id="select_professions" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvProfessions]</select></div>
      </div>

      <!-- Body (Sub-Parent) -->
      <div class="control-section">
        <div class="section-header"><h4>Body</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden">
          <!-- Body Shapes (from v0004) -->
          <div class="control-section">
            <div class="section-header"><h5>Body Shapes</h5><i class="fas fa-chevron-right chevron"></i></div>
            <div class="section-content hidden" style="padding-top: 10px;"><select id="select_body_shapes" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvBodyShape]</select></div>
          </div>
          <!-- Body Build (from v0004) -->
          <div class="control-section">
            <div class="section-header"><h5>Body Build</h5><i class="fas fa-chevron-right chevron"></i></div>
            <div class="section-content hidden" style="padding-top: 10px;">
              <select id="select_body_build" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
                <option value="">Default</option>
                <option value="sharp bone structure, prominent joints, lean build, defined angles">Angular</option>
                <option value="toned, muscular, fit, defined, balanced physique, sporty">Athletic</option>
                <option value="balanced proportions, moderate body structure, neither too slim nor too bulky">Average</option>
                <option value="prominent bones, slim, little body fat, angular build">Bony</option>
                <option value="wide shoulders, strong upper body, muscular structure, expansive chest">Broad-Shouldered</option>
                <option value="larger body structure, big muscles, solid, heavy-set, strong build">Bulky</option>
                <option value="well-developed muscles, strong, defined, bulky, athletic build">Muscular</option>
                <option value="extremely lean, very low body fat, wiry muscles, thin frame">Lean</option>
                <option value="rounder body, softer muscle tone, higher body fat ratio">Soft</option>
                <option value="compact body, dense muscle mass, short and strong build">Stocky</option>
                <option value="tall with elongated limbs, slim but not frail">Lanky</option>
                <option value="short stature with moderate muscle or fat">Short</option>
                <option value="very large and heavy, thick fat distribution, massive presence">Heavyset</option>
                <option value="frail, delicate bone structure, low muscle mass">Delicate</option>
                <option value="childlike proportions, undeveloped build">Petite</option>
              </select>
            </div>
          </div>
          <!-- Chest Sizes (from v0004) -->
          <div class="control-section">
            <div class="section-header"><h5>Chest Sizes</h5><i class="fas fa-chevron-right chevron"></i></div>
            <div class="section-content hidden" style="padding-top: 10px;">
              <select id="select_chest_sizes" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
                <option value="">Default</option>
                <option value="flat chest, no visible breasts">Flat</option>
                <option value="very small breasts, minimal curves">Very Small</option>
                <option value="small breasts, subtle definition">Small</option>
                <option value="modest breasts, natural shape">Modest</option>
                <option value="average-sized breasts, balanced proportion">Average</option>
                <option value="full breasts, visibly prominent">Full</option>
                <option value="large breasts, clearly emphasized">Large</option>
                <option value="very large breasts, heavy and rounded">Very Large</option>
                <option value="massive breasts, exaggerated proportion">Huge</option>
                <option value="extremely massive breasts, unrealistic scale">Gigantic</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- Hair (Sub-Parent) -->
      <div class="control-section">
        <div class="section-header"><h4>Hair</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden">
          <!-- Hair Style (from v0004) -->
          <div class="control-section">
            <div class="section-header"><h5>Hair Style</h5><i class="fas fa-chevron-right chevron"></i></div>
            <div class="section-content hidden" style="padding-top: 10px;">
              <select id="select_hair_style" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
                <option value="">Default</option>
                <optgroup label="♀️ Feminine Hairstyles">
                  <option value="afro hairstyle, voluminous curls">Afro</option>
                  <option value="bob cut hairstyle, short straight hair around jaw level">Bob Cut</option>
                  <option value="braided hairstyle, neat braids">Braided</option>
                  <option value="hair tied in a classic bun">Bun</option>
                  <option value="elegant low bun at the nape">Chignon</option>
                  <option value="fishtail braid hairstyle">Fishtail Braid</option>
                  <option value="french braid hairstyle">French Braid</option>
                  <option value="half updo hairstyle, top half tied, rest down">Half Updo</option>
                  <option value="layered hairstyle, soft layers for volume and flow">Layered</option>
                  <option value="messy bun, loose and casual style">Messy Bun</option>
                  <option value="pigtails hairstyle, two side ponytails">Pigtails</option>
                  <option value="pompadour hairstyle, swept up and back">Pompadour</option>
                  <option value="ponytail hairstyle, hair tied back">Ponytail</option>
                  <option value="side braid hairstyle, worn to one side">Side Braid</option>
                  <option value="twintails hairstyle, symmetrical ponytails">Twintails</option>
                  <option value="updo hairstyle, hair lifted off the neck">Updo</option>
                </optgroup>
                <optgroup label="♂️ Masculine Hairstyles">
                  <option value="afro hairstyle, thick natural curls">Afro</option>
                  <option value="caesar cut, short haircut with small fringe">Caesar Cut</option>
                  <option value="comma cut, soft wave shaping like a comma on forehead">Comma Cut</option>
                  <option value="crew cut, short and even all over">Crew Cut</option>
                  <option value="faux hawk, center strip styled upward">Faux Hawk</option>
                  <option value="hipster hairstyle, longer top with styled side part">Hipster</option>
                  <option value="ivy league haircut, neat side part with short sides">Ivy League</option>
                  <option value="pompadour hairstyle, voluminous and swept back">Pompadour</option>
                  <option value="quiff hairstyle, front hair lifted and voluminous">Quiff</option>
                  <option value="side part hairstyle, clearly defined side part">Side Part</option>
                  <option value="taper fade, smooth transition from short to longer hair">Taper Fade</option>
                  <option value="undercut hairstyle, very short sides, long top">Undercut</option>
                </optgroup>
              </select>
            </div>
          </div>
          <!-- Hair Length (from v0004) -->
          <div class="control-section">
            <div class="section-header"><h5>Hair Length</h5><i class="fas fa-chevron-right chevron"></i></div>
            <div class="section-content hidden" style="padding-top: 12px;">
              <select id="selectHairLength" class="control-btn" style="width: 100%; height: auto; -webkit-appearance: menulist; appearance: menulist; padding: 8px;">
                <option value="">Normal</option>
                <option value="tomboy, very short hair">Very Short Hair</option>
                <option value="short hair">Short Hair</option>
                <option value="medium hair">Medium Hair</option>
                <option value="long hair">Long Hair</option>
                <option value="very long hair">Very Long Hair</option>
                <option value="absurdly long hair">Absurdly Long Hair</option>
                <option value="big hair">Big Hair</option>
                <option value="bald head">Bald</option>
              </select>
            </div>
          </div>
          <!-- Hair Type (from v0004) -->
          <div class="control-section">
            <div class="section-header"><h5>Hair Type</h5><i class="fas fa-chevron-right chevron"></i></div>
            <div class="section-content hidden" style="padding-top: 12px;">
              <select id="selectHairType" class="control-btn" style="width: 100%; height: auto; -webkit-appearance: menulist; appearance: menulist; padding: 8px;">
                <option value="">Default</option>
                <option value="smooth, straight hair">Straight</option>
                <option value="loose, wavy hair">Wavy</option>
                <option value="naturally curly hair">Curly</option>
                <option value="messy hair">Messy</option>
                <option value="spiked hair">Spiked</option>
              </select>
            </div>
          </div>
          <!-- Hair Colors (from v0004) -->
          <div class="control-section">
            <div class="section-header"><h5>Hair Colors</h5><i class="fas fa-chevron-right chevron"></i></div>
            <div class="section-content hidden" style="padding-top: 10px;">
              <select id="select_hair_colors" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
                <option value="">Default</option>
                <option value="hair is auburn">Auburn</option>
                <option value="hair is blonde">Blonde</option>
                <option value="hair is brunette">Brunette</option>
                <option value="hair is dark">Dark</option>
                <option value="hair is black">Black</option>
                <option value="hair is dirty blonde">Dirty Blonde</option>
                <option value="hair is dyed blonde">Dyed (Blonde)</option>
                <option value="hair is dyed blue">Dyed (Blue)</option>
                <option value="hair is dyed green">Dyed (Green)</option>
                <option value="hair is dyed orange">Dyed (Orange)</option>
                <option value="hair is dyed pink">Dyed (Pink)</option>
                <option value="is dyed purple">Dyed (Purple)</option>
                <option value="hair is dyed bright red">Dyed (Red)</option>
                <option value="hair is dyed scarlet">Dyed (Scarlet)</option>
                <option value="hair is grey">Grey</option>
                <option value="hair is natural ginger">Redhead</option>
                <option value="head is shaved">Shaved</option>
                <option value="hair is strawberry blonde">Strawberry Blonde</option>
                <option value="hair is silver">Silver</option>
                <option value="hair is white">White</option>
                <option value="they has gradient hair, with 2 different colors hair">Gradient Hair</option>
                <option value="they has multicolored hair, with 3 or more different colors hair">Multicolored Hair</option>
                <option value="they has streaked hair, with 3 different colors hair">Streaked Hair</option>
                <option value="they has two-tone hair, with 2 different colors hair">Two-tone Hair</option>
              </select>
            </div>
          </div>
          <!-- Hair Additions (from v0004) -->
          <div class="control-section">
            <div class="section-header"><h5>Hair Additions</h5><i class="fas fa-chevron-right chevron"></i></div>
            <div class="section-content hidden" style="padding-top: 10px;">
              <select id="select_hair_add" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
                <option value="">Default</option>
                <option value="bangs">Bangs</option>
                <option value="blunt bangs">Blunt Bangs</option>
                <option value="hair between eyes">Hair Between Eyes</option>
                <option value="hair over eyes">Hair Over Eyes</option>
                <option value="hair over one eye">Hair Over One Eye</option>
                <option value="parted bangs">Parted Bangs</option>
                <option value="swept bangs">Swept Bangs</option>
                <option value="driedlocks">Driedlocks</option>
                <option value="sidelocks">Sidelocks</option>
                <option value="ahoge">Ahoge</option>
                <option value="heart ahoge">Heart Ahoge</option>
                <option value="hair antenna">Hair Antenna</option>
                <option value="hair pulled back">Hair Pulled Back</option>
                <option value="hair slicked back">Hair Slicked Back</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- Face (Sub-Parent) -->
      <div class="control-section">
        <div class="section-header"><h4>Face</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden">
          <!-- Eye Colors (from v0004) -->
          <div class="control-section">
            <div class="section-header"><h5>Eye Colors</h5><i class="fas fa-chevron-right chevron"></i></div>
            <div class="section-content hidden" style="padding-top: 10px;">
              <select id="select_eye_colors" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
                <option value="">Default</option>
                <option value="aqua eyes">Aqua</option>
                <option value="black eyes">Black</option>
                <option value="blue eyes">Blue</option>
                <option value="brown eyes">Brown</option>
                <option value="green eyes">Green</option>
                <option value="grey eyes">Grey</option>
                <option value="orange eyes">Orange</option>
                <option value="purple eyes">Purple</option>
                <option value="pink eyes">Pink</option>
                <option value="red eyes">Red</option>
                <option value="white eyes, devoid any iris and pupils">White</option>
                <option value="yellow eyes">Yellow</option>
                <option value="sleepy-eyes">Sleepy</option>
                <option value="they has two different eye color">Heterochromia</option>
              </select>
            </div>
          </div>
          <!-- Skin Colors (from v0004) -->
          <div class="control-section">
            <div class="section-header"><h5>Skin Colors</h5><i class="fas fa-chevron-right chevron"></i></div>
            <div class="section-content hidden" style="padding-top: 10px;">
              <select id="select_skin_colors" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
                <option value="">Default</option>
                <option value="very fair skin">Very Fair</option>
                <option value="fair skin">Fair</option>
                <option value="light skin">Light</option>
                <option value="light olive skin">Light Olive</option>
                <option value="olive skin">Olive</option>
                <option value="tan skin">Tan</option>
                <option value="medium skin">Medium</option>
                <option value="bronze skin">Bronze</option>
                <option value="brown skin">Brown</option>
                <option value="dark brown skin">Dark Brown</option>
                <option value="very dark skin">Very Dark</option>
                <option value="ebony skin">Ebony</option>
                <option value="alabaster skin">Alabaster</option>
                <option value="porcelain skin">Porcelain</option>
                <option value="rosy skin">Rosy</option>
                <option value="reddish skin">Reddish</option>
                <option value="freckled skin">Freckled</option>
                <option value="pale skin with cool undertone">Pale (Cool Undertone)</option>
                <option value="pale skin with warm undertone">Pale (Warm Undertone)</option>
                <option value="golden skin">Golden</option>
                <option value="silver skin">Silver</option>
                <option value="gray skin">Gray</option>
                <option value="blue-tinted skin">Blue-tinted</option>
                <option value="green skin">Green</option>
                <option value="purple skin">Purple</option>
                <option value="red skin">Red</option>
                <option value="pink skin">Pink</option>
                <option value="chalk-white skin">Chalk White</option>
                <option value="ashen skin">Ashen</option>
                <option value="translucent skin, almost see-through">Translucent</option>
              </select>
            </div>
          </div>
          <!-- Facial Decoration (from v0004) -->
          <div class="control-section">
            <div class="section-header"><h5>Facial Decoration</h5><i class="fas fa-chevron-right chevron"></i></div>
            <div class="section-content hidden" style="padding-top: 10px;">
              <select id="select_facial_decoration" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
                <option value="">Default</option>
                <optgroup label="General">
                  <option value="they wear subtle peach blush on their cheeks">Peach Blush on Cheeks</option>
                  <option value="their eyes are adorned with shimmering gold eyeshadow">Shimmering Gold Eyeshadow</option>
                  <option value="they have dramatic, winged black eyeliner">Winged Black Eyeliner</option>
                  <option value="there are small, sparkling face gems beneath their eyes">Face Gems Beneath Eyes</option>
                  <option value="they display a delicate floral face painting on their left cheek">Floral Face Painting</option>
                  <option value="their eyelashes are long and coated with thick mascara">Thick Mascara on Lashes</option>
                  <option value="they have a subtle beauty mark above their lip">Beauty Mark Above Lip</option>
                  <option value="a pair of silver nose studs adorn their nostrils">Silver Nose Studs</option>
                  <option value="they have a bold, tribal tattoo running across their jawline">Tribal Jawline Tattoo</option>
                  <option value="their eyebrows are perfectly shaped and highlighted">Highlighted Eyebrows</option>
                  <option value="they wear soft, shimmering highlighter on their cheekbones">Shimmering Cheekbone Highlighter</option>
                  <option value="their face features a dramatic lightning bolt painted across one eye">Lightning Bolt Face Paint</option>
                  <option value="they have delicate white freckles painted over their nose">White Painted Freckles</option>
                  <option value="their lips are tinted pale pink with a glossy finish">Glossy Pale Pink Lips</option>
                  <option value="their eyelids are brushed with bold neon colors">Neon Eyeshadow</option>
                  <option value="they sport a constellation of glittering stars across their temples">Glitter Star Decorations</option>
                  <option value="their cheeks have vivid stripes of bright face paint">Bright Face Paint Stripes</option>
                  <option value="they have intricate henna designs along their jaw and chin">Intricate Henna Face Art</option>
                  <option value="their lower lip is adorned with a gold piercing">Gold Lip Piercing</option>
                  <option value="their cheeks are dotted with iridescent sequins">Iridescent Sequins on Cheeks</option>
                  <option value="they have a single black teardrop drawn below their left eye">Black Teardrop Face Mark</option>
                  <option value="their temples feature metallic temporary tattoos">Metallic Temporary Tattoos</option>
                  <option value="their face displays bold geometric shapes painted in primary colors">Geometric Face Painting</option>
                </optgroup>
                <optgroup label="Masculine Facial Features">
                  <option value="they have a neatly trimmed beard framing their jawline">Neatly Trimmed Beard</option>
                  <option value="they sport a thick, rugged mustache above their lip">Thick Rugged Mustache</option>
                  <option value="their face is adorned with a full, bushy beard">Full Bushy Beard</option>
                  <option value="they have a fine, pointed goatee at their chin">Pointed Goatee</option>
                  <option value="their cheeks are covered with light, stubbly facial hair">Light Stubbly Facial Hair</option>
                  <option value="their chin features a prominent soul patch">Prominent Soul Patch</option>
                  <option value="their upper lip is accented by a pencil-thin mustache">Pencil-Thin Mustache</option>
                  <option value="they have sculpted mutton chops along their cheeks">Sculpted Mutton Chops</option>
                  <option value="their jawline is shadowed with a five o'clock stubble">Five O'Clock Shadow</option>
                  <option value="they display an elegant handlebar mustache curled at the ends">Handlebar Mustache</option>
                </optgroup>
              </select>
            </div>
          </div>
          <!-- Expression (from v0004) -->
          <div class="control-section">
            <div class="section-header"><h5>Expression</h5><i class="fas fa-chevron-right chevron"></i></div>
            <div class="section-content hidden" style="padding-top: 10px;"><select id="select_expression" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvExpression]</select></div>
          </div>
        </div>
      </div>
    </div> <!-- End Character section-content -->
  </div> <!-- End Character control-section -->

  <!-- Apparel (New Parent) -->
  <div class="control-section">
    <div class="section-header"><h3>Apparel</h3><i class="fas fa-chevron-right chevron"></i></div>
    <div class="section-content hidden">
      <!-- Headwear (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Headwear</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;"><select id="select_headwear" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvHeadWear]</select></div>
      </div>
      <!-- Topwear (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Topwear</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;"><select id="select_topwear" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvTopWear]</select></div>
      </div>
      <!-- Bottomwear (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Bottomwear</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;"><select id="select_bottomwear" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvBottomWear]</select></div>
      </div>
      <!-- Footwear (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Footwear</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;"><select id="select_footwear" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvFootWear]</select></div>
      </div>
      <!-- Accessories (Hands) (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Accessories (Hands)</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;">
          <select id="select_accessories_hands" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
            <option value="">Default</option>
            <option value="wearing a decorative bracelet">Bracelet</option>
            <option value="wearing a stylish bangle">Bangle</option>
            <option value="wearing formal cufflinks">Cufflinks</option>
            <option value="wearing warm gloves">Gloves</option>
            <option value="wearing cozy mittens">Mittens</option>
            <option value="wearing a sparkling ring">Ring</option>
            <option value="wearing a functional watch">Watch</option>
            <option value="wearing a casual wristband">Wristband</option>
            <option value="wearing an elegant wristwatch">Wristwatch</option>
            <option value="wearing fingerless gloves">Fingerless Gloves</option>
            <option value="wearing lace gloves">Lace Gloves</option>
            <option value="wearing leather gloves">Leather Gloves</option>
            <option value="wearing studded bracelets">Studded Bracelet</option>
            <option value="wearing multiple rings on one hand">Stacked Rings</option>
            <option value="wearing a charm bracelet with trinkets">Charm Bracelet</option>
            <option value="wearing glowing wrist accessory">Glowing Wristband</option>
            <option value="wearing high-tech gadget on wrist">Smart Device</option>
            <option value="wearing bandage wrap on hand">Bandaged Hand</option>
            <option value="wearing traditional hand jewelry">Hand Chain</option>
            <option value="wearing handcuffs">Handcuffs</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Scene & Mood (New Parent) -->
  <div class="control-section">
    <div class="section-header"><h3>Scene & Mood</h3><i class="fas fa-chevron-right chevron"></i></div>
    <div class="section-content hidden">
      <!-- Location (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Location</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden">
          <div class="thumbnail-grid">
            <div class="thumbnail-item" data-prompt="lush forest, ancient trees, dappled sunlight, woodland path"><div class="image-container"><img src="[links.images.location_forest]" alt="Forest"></div><span>Forest</span></div>
            <div class="thumbnail-item" data-prompt="cyberpunk city, neon lights, futuristic skyscrapers, dystopian urban environment"><div class="image-container"><img src="[links.images.location_city]" alt="City"></div><span>City</span></div>
            <div class="thumbnail-item" data-prompt="ancient ruins, crumbling stone, overgrown vegetation, lost civilization"><div class="image-container"><img src="[links.images.location_ruins]" alt="Ruins"></div><span>Ruins</span></div>
            <div class="thumbnail-item" data-prompt="interior of a spaceship, sci-fi technology, cockpit view, interstellar travel"><div class="image-container"><img src="[links.images.location_spaceship]" alt="Spaceship"></div><span>Spaceship</span></div>
            <div class="thumbnail-item" data-prompt="sandy beach, ocean waves, tropical paradise, palm trees"><div class="image-container"><img src="[links.images.location_beach]" alt="Beach"></div><span>Beach</span></div>
            <div class="thumbnail-item" data-prompt="cozy tavern, medieval inn, fireplace, wooden tables, fantasy setting"><div class="image-container"><img src="[links.images.location_tavern]" alt="Tavern"></div><span>Tavern</span></div>
            <div class="thumbnail-item" data-prompt="majestic mountains, snowy peaks, alpine landscape, vast wilderness, rocky terrain(negativePrompt:::city, indoors, flat plains, ocean, desert)"><div class="image-container"><img src="[links.images.location_mountain]" alt="Mountain"></div><span>Mountain</span></div>
            <div class="thumbnail-item" data-prompt="vast desert, sand dunes, arid landscape, oasis, camels, scorching sun(negativePrompt:::forest, jungle, ocean, snow, city)"><div class="image-container"><img src="[links.images.location_desert]" alt="Desert"></div><span>Desert</span></div>
            <div class="thumbnail-item" data-prompt="underwater scene, coral reef, marine life, sunken treasure, ocean depths, bioluminescence(negativePrompt:::land, sky, desert, forest, fire)"><div class="image-container"><img src="[links.images.location_underwater]" alt="Underwater"></div><span>Underwater</span></div>
            <div class="thumbnail-item" data-prompt="medieval castle, stone walls, turrets, drawbridge, gothic architecture, fantasy kingdom(negativePrompt:::modern building, spaceship, hut, desert, forest)"><div class="image-container"><img src="[links.images.location_castle]" alt="Castle"></div><span>Castle</span></div>
            <div class="thumbnail-item" data-prompt="space station, futuristic, orbital, sci-fi interior, advanced technology, view of Earth(negativePrompt:::natural landscape, historical setting, primitive, ground level)"><div class="image-container"><img src="[links.images.location_space_station]" alt="Space Station"></div><span>Space Station</span></div>
            <div class="thumbnail-item" data-prompt="hellish landscape, fire and brimstone, demons, lava, underworld, dark and terrifying(negativePrompt:::heaven, paradise, peaceful, serene, bright)"><div class="image-container"><img src="[links.images.location_hell]" alt="Hell"></div><span>Hell</span></div>
          </div>
        </div>
      </div>
      <!-- Mood (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Mood</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;">
          <select id="select_mood" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
            <option value="">Default</option>
            <option value="they radiate a joyful, carefree aura">Joyful and Carefree Atmosphere</option>
            <option value="their eyes reflect a deep sense of melancholy">Melancholic Expression</option>
            <option value="the scene is bathed in a dreamy, surreal light">Dreamy and Surreal Mood</option>
            <option value="their posture conveys quiet determination and resilience">Determined and Resilient Mood</option>
            <option value="they exude an ominous, mysterious presence">Ominous and Mysterious Vibe</option>
            <option value="there is a gentle sense of nostalgia in their gaze">Nostalgic Atmosphere</option>
            <option value="they give off a playful and mischievous energy">Playful and Mischievous Spirit</option>
            <option value="the ambiance feels tense and suspenseful">Tense and Suspenseful Ambiance</option>
            <option value="their smile is warm and welcoming, radiating kindness">Warm and Kind Atmosphere</option>
            <option value="the overall mood is tranquil and serene, like a quiet morning">Tranquil and Serene Mood</option>
            <option value="the environment feels electrifying and full of excitement">Exciting and Energetic Atmosphere</option>
            <option value="they appear lost in deep contemplation">Contemplative Mood</option>
            <option value="there is a whimsical, childlike wonder in their expression">Whimsical and Childlike Wonder</option>
            <option value="the air feels heavy with sorrow and loss">Sorrowful and Somber Mood</option>
            <option value="their expression evinces fierce confidence and pride">Confident and Proud Energy</option>
            <option value="they radiate an air of quiet wisdom and patience">Wise and Patient Atmosphere</option>
            <option value="the mood is restless and full of anticipation">Restless and Anticipatory Mood</option>
            <option value="they seem utterly relaxed and at peace with the world">Relaxed and Peaceful Feel</option>
            <option value="the environment is charged with suspense and curiosity">Suspenseful and Curious Energy</option>
            <option value="there is a festive, celebratory spirit in the air">Festive and Celebratory Mood</option>
            <option value="they emanate an aura of gentle shyness">Shy and Reserved Atmosphere</option>
            <option value="the mood feels haunting and ethereal, as if in a dream">Haunting and Ethereal Ambience</option>
            <option value="they seem focused and intensely alert to their surroundings">Focused and Alert State</option>
            <option value="a calm, hopeful energy radiates from their presence">Calm and Hopeful Mood</option>
          </select>
        </div>
      </div>
      <!-- Poses (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Poses</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;"><select id="select_poses" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvPose]</select></div>
      </div>
      <!-- Times (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Times</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;">
          <select id="select_clock" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
            <option value="">Default</option>
            <option value="the sky is tinged with pink and orange as the sun begins to rise, with morning dew on the leaves">Dawn</option>
            <option value="the sun has risen, casting soft warm light typical of early morning hours">Morning</option>
            <option value="the sun is at its highest point, bright and direct light with minimal shadows">Noon</option>
            <option value="the sky turns purple and orange as the sun sets, casting long shadows on the ground">Dusk</option>
            <option value="a dark sky filled with stars, with a bright full moon illuminating the surroundings">Night</option>
            <option value="bright sunshine with clear, blue skies and no clouds">Sunny</option>
          </select>
        </div>
      </div>
      <!-- Weather (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Weather</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;">
          <select id="select_weather" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
            <option value="">Default</option>
            <option value="leaves falling from trees, crisp air, and golden, orange, and red hues in the landscape">Autumn</option>
            <option value="a gray, overcast sky with no visible sun">Cloudy</option>
            <option value="dense fog with limited visibility, surrounded by mist">Foggy</option>
            <option value="small hailstones falling, with ice pellets scattered on the ground">Hail</option>
            <option value="high moisture content in the air, making it feel sticky and warm">Humid</option>
            <option value="a light mist covering the landscape, reducing visibility but not as dense as fog">Misty</option>
            <option value="a completely covered sky with thick clouds, blocking out the sun">Overcast</option>
            <option value="heavy rain falling from the sky, with raindrops splashing on the surface">Rainy</option>
            <option value="a snowy landscape with snowflakes falling and accumulating on the ground">Snowy</option>
            <option value="flowers blooming, fresh green grass, and cool air with gentle sunlight">Spring</option>
            <option value="strong winds and heavy rain, with dark storm clouds overhead">Stormy</option>
            <option value="the sun shines brightly, the sky is clear, and the temperature is warm to hot">Summer</option>
            <option value="strong winds blowing, with objects visibly swaying or fluttering">Windy</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Artistic & Output (New Parent) -->
  <div class="control-section">
    <div class="section-header"><h3>Artistic & Output</h3><i class="fas fa-chevron-right chevron"></i></div>
    <div class="section-content hidden">
      <!-- Output Effect (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Output Effect</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;">
          <select id="select_output_effect" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
            <option value="">Default</option>
            <option value="white background">White Background</option>
            <option value="monochrome, black and white tones">Monochrome</option>
            <option value="presented in multiple views or angles">Multiviews</option>
            <option value="structured reference sheet with labeled views">Reference Sheet</option>
            <option value="retro style with cel shading and old-school coloring">Vintage</option>
            <option value="bright, bold colors and thick outlines inspired by comic books">Pop Art</option>
            <option value="styled like a high-fashion magazine cover">Magazine Cover</option>
            <option value="simplified, exaggerated cartoon-style illustration">Cartoon</option>
            <option value="raw pencil or ink sketch style, unpolished">Sketch</option>
            <option value="textured, brush-stroked painterly finish">Painting</option>
            <option value="soft watercolor paint effect with flowing tones">Watercolor</option>
            <option value="presented as part of a comic book panel">Comic Panel</option>
            <option value="grainy, low-res style with VHS scanlines and noise">VHS Effect</option>
            <option value="minimal color gradients with hard edges, poster-like">Posterized</option>
            <option value="visual distortion with digital glitch artifacts">Glitch</option>
            <option value="low-resolution pixel-based retro graphics">Pixel Art</option>
            <option value="clean black and white outlines with no coloring">Line Art</option>
            <option value="elements glowing in neon light, cyberpunk vibe">Neon Glow</option>
            <option value="blueprint-style technical drawing on a grid background">Blueprint</option>
          </select>
        </div>
      </div>
      <!-- Lighting (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Lighting</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;">
          <select id="select_lighting" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
            <option value="">Default</option>
            <option value="soft lighting, gentle shadows, warm ambiance">Soft & Warm</option>
            <option value="dramatic lighting, high contrast, strong shadows">Dramatic</option>
            <option value="backlight, glowing rim, subject in silhouette">Backlight Silhouette</option>
            <option value="neon lighting, colored highlights, cyberpunk atmosphere">Neon Glow</option>
            <option value="natural daylight, balanced light, clear details">Natural Daylight</option>
            <option value="moody lighting, cool tones, subdued atmosphere">Moody & Cool</option>
            <option value="spotlight, focused beam, dark surroundings">Spotlight</option>
            <option value="candlelight, flickering warm glow, intimate setting">Candlelight</option>
            <option value="golden hour, soft orange light, long shadows">Golden Hour</option>
            <option value="overcast sky, diffuse soft light, muted shadows">Overcast</option>
            <option value="studio lighting, even illumination, crisp details">Studio</option>
            <option value="colorful gradients, fantasy ambiance, surreal mood">Fantasy Colors</option>
            <option value="noir lighting, deep shadows, black and white, mysterious">Noir</option>
            <option value="harsh sunlight, strong highlights, sharp shadows">Harsh Sunlight</option>
            <option value="rainy atmosphere, reflections, blue-gray tones">Rainy Mood</option>
          </select>
        </div>
      </div>
      <!-- Angle (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Angle</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;">
          <select id="select_angle" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
            <option value="">Default</option>
            <option value="shot taken from an elevated position, often using drones">Aerial</option>
            <option value="shot from behind the subject">Behind</option>
            <option value="an extreme high angle, looking directly down from above">Bird's Eye View</option>
            <option value="tilted shot with diagonal horizon, adds tension or dynamic feel">Dutch Angle / Tilt</option>
            <option value="shot at the subject's eye level, creating a neutral perspective">Eye-Level</option>
            <option value="ultra-wide-angle lens creating a spherical, distorted view">Fish-Eye</option>
            <option value="camera positioned above the subject, looking down">High Angle</option>
            <option value="camera positioned below the subject, looking up">Low Angle</option>
            <option value="mimics the subject's perspective, showing what they see">Point of View (POV)</option>
            <option value="extreme low angle, looking up from a very low point">Worm's Eye View</option>
            <option value="wide-angle lens capturing a broad scene">Wide-Angle</option>
          </select>
        </div>
      </div>
      <!-- Frame (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Frame</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;">
          <select id="select_frame" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
            <option value="">Default</option>
            <option value="subject is placed in the center of the frame">Center Framing</option>
            <option value="frames the subject partially or cuts them out">Cutaway</option>
            <option value="the subject’s feet are not included in the shot">Feet Out of Frame</option>
            <option value="using elements in the environment to frame the subject naturally">Natural Framing</option>
            <option value="dividing the frame into a 3x3 grid and placing the subject at intersections">Rule of Thirds</option>
            <option value="frames from the upper part of the body to above the head">Upper Body</option>
          </select>
        </div>
      </div>
      <!-- Shot Types (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Shot Types</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;">
          <select id="select_shot_types" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
            <option value="">Default</option>
            <option value="a detailed shot of buildings or structures">Architectural</option>
            <option value="unposed and spontaneous shots of people in natural settings">Candid</option>
            <option value="focusing closely on the subject">Close-Up</option>
            <option value="frames from mid-thigh to above the head, often used in westerns">Cowboy Shot</option>
            <option value="capturing the entire body of the subject">Full Body</option>
            <option value="a broad view of a landscape">Landscape</option>
            <option value="a close-up of small subjects">Macro</option>
            <option value="the shot is positioned behind a subject, focusing on what they are looking at or interacting with">Over-the-Shoulder</option>
            <option value="a wide-angle view created by stitching multiple images together">Panorama</option>
            <option value="a close-up of a person or subject">Portrait</option>
            <option value="capturing the subject from the side">Profile Shot</option>
            <option value="the shot is positioned to the side of the subject, often capturing profiles or side views">Sideways</option>
            <option value="photographing inanimate objects arranged artistically">Still Life</option>
            <option value="candid shots of people and urban environments">Street</option>
            <option value="a tightly framed image focusing only on a part of the face or object">Extreme Close-Up</option>
            <option value="a portrait focused tightly on the head, from shoulders up">Headshot</option>
            <option value="composing the subject with significant empty or open space to draw attention">Negative Space</option>
          </select>
        </div>
      </div>
      <!-- Techniques (from v0004) -->
      <div class="control-section">
        <div class="section-header"><h4>Techniques</h4><i class="fas fa-chevron-right chevron"></i></div>
        <div class="section-content hidden" style="padding-top: 10px;">
          <select id="select_techniques" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
            <option value="">Default</option>
            <option value="bokeh effect">Bokeh</option>
            <option value="images created to convey an abstract idea or concept">Conceptual</option>
            <option value="capturing real-life events or stories with a focus on authenticity">Documentary</option>
            <option value="emphasizing clothing and accessories, often with stylized poses and settings">Fashion</option>
            <option value="high dynamic range photography for enhanced detail in highlights and shadows">HDR</option>
            <option value="using a slow shutter speed to capture motion blur or light trails">Long Exposure</option>
            <option value="capturing scenes in low light conditions">Night</option>
            <option value="using a lens that allows for selective focus and perspective control">Tilt-Shift</option>
            <option value="using a lens with a long focal length to zoom in on distant subjects">Telephoto</option>
            <option value="using a lens with a short focal length to capture a broader scene">Wide-Angle</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- URV Themes (Top Level - from v0004) -->
  [something("urvillain-imagine", "https://user.uploads.dev/file/8e34cce3e219d3ea4995977cc097482f.jpg")]
  <div class="control-section">
    <div class="section-header"><h3>Themes</h3><i class="fas fa-chevron-right chevron"></i></div>
    <div class="section-content"> <!-- Themes content visible by default -->
      <div class="theme-selector" style="padding-top: 12px;">
        <span class="theme-label" style="color: #a1a1aa; margin-bottom: 6px; display: block;"><i class="fas fa-palette"></i> URV Themes</span>
        <select id="selectThemes" class="theme-dropdown" onchange="updateSelectedThemes(this.value)" style="width: 100%; padding: 8px; border-radius: 4px; background-color: #3f3f46; color: #f4f4f5; border: 1px solid #52525b;">
          [urvThemes]
        </select>
      </div>
    </div>
  </div>

  <!-- Extras & NSFW (New Parent) -->
  <div class="control-section">
    <div class="section-header"><h3>Extras & NSFW</h3><i class="fas fa-chevron-right chevron"></i></div>
    <div class="section-content hidden">
        <!-- Naughty Wear (from v0004) -->
        <div class="control-section">
          <div class="section-header"><h4>Naughty Wear</h4><i class="fas fa-chevron-right chevron"></i></div>
          <div class="section-content hidden" style="padding-top: 10px;"><select id="select_naughty_wear" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvHotWear]</select></div>
        </div>
        <!-- Fantasy Wear (from v0004) -->
        <div class="control-section">
          <div class="section-header"><h4>Fantasy Wear</h4><i class="fas fa-chevron-right chevron"></i></div>
          <div class="section-content hidden" style="padding-top: 10px;"><select id="select_fantasy_wear" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvFantasyWear]</select></div>
        </div>
        <!-- Traditional Wear (from v0004) -->
        <div class="control-section">
          <div class="section-header"><h4>Traditional Wear</h4><i class="fas fa-chevron-right chevron"></i></div>
          <div class="section-content hidden" style="padding-top: 10px;"><select id="select_traditional_wear" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvTraditionalWear]</select></div>
        </div>
        <!-- More Attires (from v0004) -->
        <div class="control-section">
          <div class="section-header"><h4>More Attires</h4><i class="fas fa-chevron-right chevron"></i></div>
          <div class="section-content hidden" style="padding-top: 10px;"><select id="select_more_attires" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">[urvMoreWear]</select></div>
        </div>
        <!-- NSFW Extras (from v0004) -->
        <div class="control-section">
          <div class="section-header"><h4>NSFW Extras</h4><i class="fas fa-chevron-right chevron"></i></div>
          <div class="section-content hidden" style="padding-top: 10px;">
            <select id="select_nsfw_extras" class="control-btn" style="width: 100%; padding: 8px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
              <option value="">Default</option>
              <option value="Sex Slave: A submissive and obedient slave, adorned with a neck collar, handcuffs, a harness, a cage bra harness, and stockings with a garter belt. They has poked nipples and a glistening sex, and their body was bruised and scarred, their expressions often resilient yet dazed.">Sex Slave</option>
              <option value="She has a sexy open mouth with a surprised look and beautiful, well-shaped breasts. She is topless with cum on her chest, face, and hair.">Bukkake</option>
              <option value="She is wearing high-heeled boots.">Boots</option>
              <option value="She is wearing high-heeled ankle boots.">Boots (ankle)</option>
              <option value="She is wearing knee-length high-heeled boots.">Boots (knee)</option>
              <option value="She is wearing thigh-length high-heeled boots.">Boots (thigh)</option>
              <option value="She has prominent cleavage.">Cleavage</option>
              <option value="There is semen dripping from her mouth.">Cum in mouth</option>
              <option value="She has freckles on her face and body.">Freckles</option>
              <option value="The shot is taken from behind.">From behind</option>
              <option value="She has hard, poky, erect nipples.">Hard nipples (exposed)</option>
              <option value="She has hard, poky, erect nipples visible under her clothes.">Hard nipples (under clothes)</option>
              <option value="She is wearing high heels.">High heels</option>
              <option value="She has a big, fat, round ass.">Huge ass</option>
              <option value="She has huge, enormous, big boobs.">Huge boobs</option>
              <option value="She has long legs.">Long legs</option>
              <option value="She is wearing pantyhose.">Pantyhose</option>
              <option value="Her pussy is very hairy, with natural unshaven pubic hair.">Pussy (hairy)</option>
              <option value="Her pussy is shaved and free of hair.">Pussy (shaved)</option>
              <option value="She is wearing a short skirt.">Short skirt</option>
              <option value="The shot captures her side-boob.">Side boob</option>
              <option value="She is wearing stockings.">Stockings</option>
              <option value="She is wearing stockings and a garter belt.">Stockings and garter belt</option>
              <option value="She is wearing stockings and suspenders.">Stockings and suspenders</option>
              <option value="She is tall.">Tall</option>
              <option value="She has tattoos.">Tattoos</option>
              <option value="She has full body tattoos.">Tattoos full</option>
              <option value="Her hair and body are wet.">Wet</option>
              <option value="An uncensored, explicit scene of porn, adult content, with a man and a woman having sex in the missionary position. They are sitting on the bed, the natural penis enters from below, she spreads her legs, leans back on the wall, and her pussy is filled with the whole cock. They face each other, her pussy is filled with massive cum, her eyes roll up, she has an ahegao expression, her eyes are wide open, and she looks shy and blushed. It is a very shy, extreme close-up, POV shot from above.">Having Sex V1</option>
              <option value="An uncensored, explicit scene of porn, adult content, with a man and a woman having sex in the missionary position. They are lying down on the bed, the natural penis enters from below, she spreads her legs, arches her back, and her pussy is filled with the whole cock. They face each other, her pussy is filled with massive cum, her eyes roll up, she has an ahegao expression, and she looks shy and blushed. It is a very shy, extreme close-up, POV shot from above.">Having Sex V2</option>
              <option value="An uncensored, explicit scene of sexual acts, with a man and a woman having sex in the mating press position. The desired angle and view are highlighted.">Having Sex V3</option>
              <option value="An explicit scene of a man and a woman having sex in the doggy style position. The woman is on all fours, and the man stands behind her. Their intimate connection is highlighted by the contrast of their forms.">Doggystyle</option>
              <option value="An explicit scene of a woman performing a deep-throat blowjob on a man. The woman's eyes are watering from a blend of pain and pleasure as she swallows the man's cock. The scene is from the man's POV, showing a natural penis with precum.">Blowjob</option>
              <option value="An explicit scene of a woman performing fellatio on a man's cock, shown from a POV perspective.">Fellatio</option>
            </select>
          </div>
        </div>
    </div>
  </div>

  <!-- Add Custom Item (Top Level - from v0004) -->
  <div class="control-section">
    <div class="section-header">
      <h3>Add Custom Item</h3>
      <i class="fas fa-chevron-right chevron"></i>
    </div>
    <div class="section-content hidden">
      <div style="padding-top: 12px; display: flex; flex-direction: column; gap: 10px;">
        <input type="text" id="customItemInput" placeholder="Enter item name..." style="background-color: #3f3f46; color: #f4f4f5; border: 1px solid #52525b; padding: 8px; border-radius: 4px;">
        <button id="addCustomItemBtn" style="background-color: #3b82f6; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer;">Add Item</button>
      </div>
      <div id="customItemsContainer" class="thumbnail-grid" style="margin-top: 12px;">
        <!-- Custom items will be appended here -->
      </div>
    </div>
  </div>
</aside>

      <!-- MAIN CONTENT -->
      <main class="main-content">
        <div class="top-bar">
          <div class="main-tabs">
            <button class="tab-btn active" data-tab="generate">Generate</button>
            <button class="tab-btn" data-tab="gallery">Gallery</button>
            <button class="tab-btn" data-tab="forum">Forum</button> <!-- Added Forum Tab -->
          </div>
          <div></div> <!-- Spacer -->
        </div>

        <div class="tab-content-area">
          <div id="generate-tab-content" class="tab-pane active">
            <div class="generation-area" style="display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; padding: 20px;">
              [output]
            </div>

            <div class="prompt-area-container">
                <textarea id="prompt-textarea" placeholder="Describe what you want to create...">A stunning young blonde teenager, emarating an aura of youthful innocence and inexperience. She stands in the vibrant countryside, surrounded by the verdant embrace of lush fields and towering trees, their foliage whispering secrets of the world beyond. Her eves sparkle with the iov of discovery. as she aazes directiv into the camera with a</textarea>
                <div class="prompt-controls">
                    <div class="prompt-group">
                        <button class="control-btn"><i class="far fa-square"></i> 1:1 <i class="fas fa-chevron-down fa-xs"></i></button>
                        <div class="guidance-container">
                            <input type="range" id="guidanceScale" min="1" max="15" step="1" value="7" />
                        </div>
                        <input type="text" id="seed-input" placeholder="Seed"/>
                        <!-- New UI Elements Added Here -->
                        <select id="imageCountSelect" class="control-btn" style="padding: 8px 12px; height: auto; -webkit-appearance: menulist; appearance: menulist;">
                            <option value="1">1 Image</option>
                            <option value="2">2 Images</option>
                            <option value="4" selected>4 Images</option>
                            <option value="8">8 Images</option>
                            <option value="16">16 Images</option>
                        </select>
                        <input type="text" id="saveTitleInput" placeholder="Title for gallery..." class="control-btn" style="background-color: #27272A; border: 1px solid #52525B; color: #a1a1aa; width: 120px; height: 36px; text-align: center;">
                        <button class="control-btn"><i class="fas fa-comment-dots"></i></button>
                    </div>
                    <button id="regenerate-btn" class="btn-regenerate"><i class="fas fa-magic"></i> Generate</button>
                </div>
            </div>
          </div>

          <div id="gallery-tab-content" class="tab-pane">
            <div class="gallery-container">
              <hr style="border-color: #3f3f46; margin-bottom: 1rem; border-style: solid; border-width: 1px 0 0 0;" />
              <div style="margin: 0; padding: 0;">
                <ul style="font-size: 0.8rem; color: #a1a1aa; font-family: inherit; margin: 0; padding-left: 1rem; line-height: 1.5; list-style: none;">
                  <li style="margin-bottom: 0.5rem;">
                    <i class="fa-solid fa-triangle-exclamation" style="color: #facc15; margin-right: 8px;"></i>
                    NSFW images are allowed, but any content involving minors, hate speech, or discrimination will result in an
                    <strong style="color: #ef4444;">immediate ban</strong>.
                  </li>
                  <li style="margin-bottom: 0.5rem;">
                    <i class="fa-solid fa-ban" style="color: #ef4444; margin-right: 8px;"></i>
                    Spamming the public gallery with <strong style="color: #ffffff;">more than 10 images</strong> of the same theme is prohibited.
                  </li>
                  <li>
                    <i class="fa-solid fa-users" style="color: #3b82f6; margin-right: 8px;"></i>
                    Respect the public gallery.
                  </li>
                </ul>
              </div>
              <hr style="border-color: #3f3f46; margin-top: 1rem; margin-bottom: 1rem; border-style: solid; border-width: 1px 0 0 0;" />
              <div class="gallery-grid">
                  [fluxSchnell(galleryOptions)]
              </div>
            </div>
          </div>

          <!-- Forum Tab Content -->
          <div id="forum-tab-content" class="tab-pane">
            <div class="gallery-container"> <!-- Reusing gallery-container for padding -->
              [commentsPlugin(commentOptions)]
            </div>
          </div>
        </div>
      </main>

    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // --- Aspect Ratio Cycling ---
        const aspectRatioBtn = document.querySelector('.prompt-group .control-btn');
        const aspectRatios = ["1:1", "2:3", "3:2"]; // Add more as needed
        const aspectRatioIcons = ["fa-regular fa-square", "fa-solid fa-image-portrait", "fa-solid fa-panorama"]; // Matching Font Awesome icons
        let currentAspectRatioIndex = 0;
        let currentResolution = "1024x1024"; // Default, will be updated by updateOrientation

        if (aspectRatioBtn) {
            // Set initial state by calling updateOrientation
            updateOrientation(currentAspectRatioIndex); // Initialize button text/data and global var

            aspectRatioBtn.addEventListener('click', () => {
                currentAspectRatioIndex = (currentAspectRatioIndex + 1) % aspectRatios.length;
                updateOrientation(currentAspectRatioIndex);
            });
        }

        // This function was from index-old.html context, let's define it here or ensure it's available
        // It seems like the aspect ratio button itself is handling the text, but we need to set `window.resolution`
        function updateOrientation(value) { // value is the index for aspectRatios array
            const orientationValueEl = aspectRatioBtn; // The button itself will display the text
            const resolutions = ["1024x1024", "768x1024", "1024x768"]; // Example resolutions matching 1:1, 2:3, 3:2 for Perchance

            if(orientationValueEl) {
              orientationValueEl.innerHTML = `<i class="${aspectRatioIcons[value]}"></i> ${aspectRatios[value]} <i class="fas fa-chevron-down fa-xs"></i>`;
              orientationValueEl.dataset.aspectRatio = aspectRatios[value]; // Keep this for other JS if needed
            }
            window.resolution = resolutions[value]; // Set global var for Perchance
            console.log("Resolution set to:", window.resolution);
        }


        function getSelectedAspectRatio() { // This might be redundant if window.resolution is kept up-to-date
            return aspectRatioBtn ? aspectRatioBtn.dataset.aspectRatio : aspectRatios[0];
        }

        // --- Main Prompt Assembly and Generation Function ---
        function generateImages() {
            let collectedPromptParts = [];
            let negativePromptParts = []; // For future use if styles have negative parts

            // 1. Get Main Prompt Text
            const mainPromptText = document.getElementById('prompt-textarea').value.trim();
            if (mainPromptText) {
                collectedPromptParts.push(mainPromptText);
            }

            // 2. Get Selected Style
            const stylesSection = document.querySelector('.left-sidebar .control-section:nth-child(1)'); // Assuming first section is Styles
            const selectedStyleItem = stylesSection ? stylesSection.querySelector('.thumbnail-item.selected') : null;
            if (selectedStyleItem && selectedStyleItem.dataset.prompt) {
                const fullPromptData = selectedStyleItem.dataset.prompt;
                let mainStylePrompt = fullPromptData;
                let negativeStylePrompt = "";

                if (fullPromptData.includes("(negativePrompt:::")) {
                    const parts = fullPromptData.split("(negativePrompt:::");
                    mainStylePrompt = parts[0].trim();
                    negativeStylePrompt = parts[1].replace(")", "").trim();
                }

                if (mainStylePrompt) {
                    collectedPromptParts.push(mainStylePrompt);
                }
                if (negativeStylePrompt) {
                    negativePromptParts.push(negativeStylePrompt);
                }
            }

            // 3. Get Selected "Boxes" (Species, Location) - using alt text as a simple key
            const sidebarSections = document.querySelectorAll('.left-sidebar .control-section');
            sidebarSections.forEach(section => {
                const headerText = section.querySelector('h3')?.textContent;
                const selectedItem = section.querySelector('.thumbnail-item.selected');
                if (selectedItem && (headerText === "Species" || headerText === "Location")) {
                    let promptValue = "";
                    if (selectedItem.dataset.prompt) {
                        promptValue = selectedItem.dataset.prompt;
                    } else {
                        const itemNameSpan = selectedItem.querySelector('span');
                        if (itemNameSpan) {
                            promptValue = itemNameSpan.textContent.toLowerCase();
                        }
                    }
                    if (promptValue) {
                         collectedPromptParts.push(promptValue);
                    }
                }
            });

            // 4. Get Custom Added Items
            const customItems = document.querySelectorAll('#customItemsContainer .thumbnail-item.selected');
            customItems.forEach(item => {
                const itemName = item.querySelector('span').textContent;
                if (itemName) {
                    collectedPromptParts.push(itemName.toLowerCase());
                }
            });

            // 5. Get URV Theme (if selectThemes element exists and has a value)
            const themeSelect = document.getElementById('selectThemes');
            if (themeSelect && themeSelect.value) {
                // Assuming 'theme' object is populated by Perchance for [urvThemes]
                // and has a structure like: theme = { "themeName1": {prompt: "prompt for theme1"}, ... }
                // This part is a placeholder as `theme` object is not defined in current scope.
                // It would typically be populated by the Perchance [urvThemes] plugin.
                // For now, let's just take the value if it's not empty.
                if (typeof theme !== 'undefined' && theme[themeSelect.value] && theme[themeSelect.value].prompt) {
                     collectedPromptParts.push(theme[themeSelect.value].prompt);
                } else if (themeSelect.value) {
                    // Fallback if theme object isn't structured as expected, but has a value
                    // collectedPromptParts.push(themeSelect.value);
                }
            }

            // NEW: 5.b. Get values from all sidebar dropdowns
            const dropdownIds = [
                "selectGender", "selectHairType", "selectHairLength", // Existing dropdowns from a previous task
                "select_ethnicity", "select_maturity", "select_persona", "select_professions",
                "select_hair_style", "select_hair_add", "select_hair_colors", "select_eye_colors",
                "select_skin_colors", "select_facial_decoration", "select_expression",
                "select_body_shapes", "select_body_build", "select_chest_sizes",
                "select_headwear", "select_topwear", "select_bottomwear", "select_footwear",
                "select_accessories_hands", "select_naughty_wear", "select_fantasy_wear",
                "select_traditional_wear", "select_more_attires", "select_mood", "select_poses",
                "select_angle", "select_frame", "select_shot_types", "select_techniques",
                "select_clock", "select_weather", "select_output_effect", "select_lighting",
                "select_nsfw_extras"
            ];

            dropdownIds.forEach(id => {
                const selectElement = document.getElementById(id);
                if (selectElement && selectElement.value) {
                    // For Perchance lists like [urvEthnicity], the value might be the list name
                    // or Perchance might directly substitute the selected option's value.
                    // We assume selectElement.value directly gives the prompt snippet.
                    if (selectElement.value.startsWith('[') && selectElement.value.endsWith(']')) {
                        // If it's a Perchance list placeholder, e.g. "[urvEthnicity]",
                        // we might not want to add it directly if Perchance handles it.
                        // However, if the <option> value itself is the list name, Perchance might replace it.
                        // For now, let's assume if value is like "[...]", it's a placeholder not to be added directly.
                        // This depends on how Perchance populates these. If Perchance sets the actual prompt snippet
                        // into the option's value, then this check is not needed.
                        // Given the task, we are to take the .value, so we will.
                        // If Perchance lists are directly used as values, they will be passed as is.
                    }
                    collectedPromptParts.push(selectElement.value);
                }
            });

            // 6. Get Generation Settings
            const aspectRatio = getSelectedAspectRatio(); // This is "1:1", "2:3", etc.
            const guidance = document.getElementById('guidanceScale').value;
            let seed = document.getElementById('seed-input').value.trim();
            if (seed === '') {
                seed = Math.floor(Math.random() * 1000000).toString();
            }

            // --- Assemble Final Prompt ---
            let finalPrompt = collectedPromptParts.join(", ");
            let finalNegativePrompt = negativePromptParts.join(", ");

            // --- Setting Global Variables for Perchance ---
            window.userPrompt = finalPrompt;
            window.negativePrompt = finalNegativePrompt;

            // window.resolution is already set globally by updateOrientation
            // and contains strings like "1024x1024"

            // Parse window.resolution to set window.width and window.height
            if (window.resolution && typeof window.resolution === 'string') {
                const parts = window.resolution.split('x');
                if (parts.length === 2) {
                    window.width = parseInt(parts[0], 10);
                    window.height = parseInt(parts[1], 10);
                } else {
                    console.warn('Resolution string format error. Defaulting width/height.');
                    window.width = 512;
                    window.height = 512;
                }
            } else {
                console.warn('window.resolution not set. Defaulting width/height.');
                window.width = 512;
                window.height = 512;
            }

            const guidanceSlider = document.getElementById('guidanceScale');
            if (guidanceSlider) window.guidanceScale = parseInt(guidanceSlider.value, 10);

            const seedInput = document.getElementById('seed-input');
            if (seedInput) window.seed = seedInput.value.trim() === '' ? Math.floor(Math.random() * 1000000000).toString() : seedInput.value.trim();

            const imageCountSelect = document.getElementById('imageCountSelect');
            if (imageCountSelect) window.outputCount = parseInt(imageCountSelect.value, 10);

            const saveTitleInput = document.getElementById('saveTitleInput');
            if (saveTitleInput) window.saveTitle = saveTitleInput.value;

            // Directly update global promptData if it exists
            if (typeof window.promptData === 'object' && window.promptData !== null) {
                console.log('Attempting to directly modify global promptData object.');
                window.promptData.resolution = window.resolution; // Ensure this matches [resolution] placeholder
                window.promptData.num_outputs = window.outputCount; // Assuming 'num_outputs' is correct

                // Optional: If fluxSchnell prefers width/height explicitly
                // delete window.promptData.resolution;
                // window.promptData.width = window.width;
                // window.promptData.height = window.height;
                console.log('Modified promptData:', JSON.parse(JSON.stringify(window.promptData))); // Log a deep copy
            } else {
                console.log('Global promptData object not found or not an object. Relying on Perchance to pick up global window.resolution and window.outputCount for promptData construction.');
            }

            console.log("--- Global Perchance Variables Set ---");
            console.log("window.userPrompt:", window.userPrompt);
            console.log("window.negativePrompt:", window.negativePrompt);
            console.log("window.resolution:", window.resolution);
            console.log("window.width:", window.width);
            console.log("window.height:", window.height);
            console.log("window.guidanceScale:", window.guidanceScale);
            console.log("window.seed:", window.seed);
            console.log("window.outputCount:", window.outputCount);
            console.log("window.saveTitle:", window.saveTitle);
            console.log("--- --- ---");

            // Call Perchance's update() function
            if (typeof update === 'function') {
                update();
            } else {
                console.error("Perchance 'update()' function not found. Generation may not occur automatically via this button. Please ensure Perchance's core 'update' mechanism is available.");
            }

            console.log("Image display will be handled by Perchance [output] tag.");

            // History saving removed.
        }

        document.getElementById('regenerate-btn').addEventListener('click', generateImages);

        // --- Collapsible Sections Logic ---
        const sectionHeaders = document.querySelectorAll(".section-header");
        sectionHeaders.forEach((header) => {
          header.addEventListener("click", () => {
            const content = header.nextElementSibling;
            const chevron = header.querySelector(".chevron");
            content.classList.toggle("hidden");
            chevron.classList.toggle("rotated");
          });
        });

        // --- Thumbnail Selection Logic ---
        const thumbnailItems = document.querySelectorAll(".thumbnail-item");
        thumbnailItems.forEach((item) => {
          item.addEventListener("click", () => {
            const grid = item.closest('.thumbnail-grid');
            const siblings = grid.querySelectorAll(".thumbnail-item");
            siblings.forEach((sibling) => sibling.classList.remove("selected"));
            item.classList.add("selected");
          });
        });

        // --- Main Tabs (Generate/Gallery) Logic ---
        const tabButtons = document.querySelectorAll(".tab-btn");
        const tabPanes = document.querySelectorAll(".tab-pane");

        tabButtons.forEach(button => {
            button.addEventListener("click", () => {
                const targetTab = button.getAttribute("data-tab");
                tabButtons.forEach(btn => btn.classList.remove("active"));
                button.classList.add("active");
                tabPanes.forEach(pane => {
                    pane.classList.toggle("active", pane.id === `${targetTab}-tab-content`);
                });
            });
        });

        // --- Custom Item Functionality ---
        const customItemInput = document.getElementById('customItemInput');
        const addCustomItemBtn = document.getElementById('addCustomItemBtn');
        const customItemsContainer = document.getElementById('customItemsContainer');

        function addCustomItem() {
            const itemName = customItemInput.value.trim();
            if (itemName === '') {
                alert('Please enter an item name.');
                return;
            }

            const newItemDiv = document.createElement('div');
            newItemDiv.classList.add('thumbnail-item');
            // newItemDiv.classList.add('custom-item'); // Optional: for specific custom item styling

            const imageContainer = document.createElement('div');
            imageContainer.classList.add('image-container');
            // Placeholder for image - can be a generic icon or text
            imageContainer.innerHTML = '<i class="fas fa-plus" style="font-size: 24px; color: #52525b; display:flex; justify-content:center; align-items:center; width:100%; height:100%;"></i>';


            const nameSpan = document.createElement('span');
            nameSpan.textContent = itemName;

            newItemDiv.appendChild(imageContainer);
            newItemDiv.appendChild(nameSpan);

            customItemsContainer.appendChild(newItemDiv);

            // Add selection logic similar to other thumbnail items
            newItemDiv.addEventListener("click", () => {
                const grid = newItemDiv.closest('.thumbnail-grid');
                const siblings = grid.querySelectorAll(".thumbnail-item");
                siblings.forEach((sibling) => sibling.classList.remove("selected"));
                newItemDiv.classList.add("selected");
                // Here you might want to trigger some action with the custom item's name (itemName)
                console.log("Custom item selected:", itemName);
            });

            customItemInput.value = ''; // Clear input field
        }

        if (addCustomItemBtn) {
            addCustomItemBtn.addEventListener('click', addCustomItem);
        }

        // Optional: Allow adding by pressing Enter in the input field
        if (customItemInput) {
            customItemInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    addCustomItem();
                }
            });
        }

      });
    </script>

    <!-- Generator Stats from index-old.html -->
  </body>
</html>

[end of index-v0004.html]
